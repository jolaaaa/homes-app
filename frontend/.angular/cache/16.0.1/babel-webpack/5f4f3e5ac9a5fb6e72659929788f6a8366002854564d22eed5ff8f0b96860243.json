{"ast":null,"code":"import { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { NgIf } from \"@angular/common\";\nimport { RouterLink } from \"@angular/router\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nfunction LoginComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nconst _c0 = function () {\n  return [\"/register\"];\n};\nclass LoginComponent {\n  constructor(fb, router) {\n    this.fb = fb;\n    this.router = router;\n    this.error = null;\n    this.validCredentials = [{\n      email: 'admin@example.com',\n      password: 'admin123'\n    }, {\n      email: 'user@example.com',\n      password: 'user123'\n    }];\n    this.loginForm = this.fb.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required]]\n    });\n    // controllo se esiste già un utente salvato\n    const savedUser = localStorage.getItem('user');\n    if (savedUser) {\n      this.user = JSON.parse(savedUser);\n      this.isLoggedIn = true;\n    }\n  }\n  onSubmit() {\n    if (this.loginForm.valid) {\n      const {\n        email,\n        password\n      } = this.loginForm.value;\n      const usersJson = localStorage.getItem('registeredUsers');\n      const users = usersJson ? JSON.parse(usersJson) : [];\n      // cerca nelle credenziali registrate o hardcoded\n      const matchedUser = users.find(u => u.email === email && u.password === password) || this.validCredentials.find(u => u.email === email && u.password === password);\n      if (matchedUser) {\n        // salva in localStorage\n        localStorage.setItem('user', JSON.stringify({\n          email\n        }));\n        // naviga alla home page\n        this.router.navigate(['/home']);\n      } else {\n        this.error = 'Credenziali non valide';\n      }\n    }\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 13,\n  vars: 4,\n  consts: [[1, \"container\"], [1, \"login-form\", 3, \"formGroup\", \"ngSubmit\"], [\"class\", \"error\", 4, \"ngIf\"], [\"type\", \"email\", \"formControlName\", \"email\", \"placeholder\", \"Email\"], [\"type\", \"password\", \"formControlName\", \"password\", \"placeholder\", \"Password\"], [\"type\", \"submit\"], [1, \"register-link\"], [3, \"routerLink\"], [1, \"error\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_1_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(2, \"h2\");\n      i0.ɵɵtext(3, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, LoginComponent_div_4_Template, 2, 1, \"div\", 2);\n      i0.ɵɵelement(5, \"input\", 3)(6, \"input\", 4);\n      i0.ɵɵelementStart(7, \"button\", 5);\n      i0.ɵɵtext(8, \"Accedi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"p\", 6);\n      i0.ɵɵtext(10, \" Non hai un account? \");\n      i0.ɵɵelementStart(11, \"a\", 7);\n      i0.ɵɵtext(12, \"Registrati\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.error);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c0));\n    }\n  },\n  dependencies: [ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, NgIf, RouterLink],\n  styles: [\".container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n    min-height: 100vh;\\r\\n    background: #f4f4f4;\\r\\n}\\r\\n\\r\\n.login-form[_ngcontent-%COMP%] {\\r\\n    background: white;\\r\\n    padding: 20px;\\r\\n    border-radius: 12px;\\r\\n    box-shadow: 0px 2px 6px rgba(0,0,0,0.2);\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    gap: 10px;\\r\\n    width: 300px;\\r\\n}\\r\\n\\r\\n.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\r\\n    text-align: center;\\r\\n    margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\r\\n    padding: 10px;\\r\\n    border-radius: 8px;\\r\\n    border: 1px solid #ccc;\\r\\n}\\r\\n\\r\\n.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n    padding: 10px;\\r\\n    border: none;\\r\\n    background: #007bff;\\r\\n    color: white;\\r\\n    border-radius: 8px;\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\r\\n    background: #0056b3;\\r\\n}\\r\\n\\r\\n.error[_ngcontent-%COMP%] {\\r\\n    color: red;\\r\\n    font-size: 0.9em;\\r\\n    text-align: center;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsbUJBQW1CO0lBQ25CLGlCQUFpQjtJQUNqQixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsYUFBYTtJQUNiLG1CQUFtQjtJQUNuQix1Q0FBdUM7SUFDdkMsYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixTQUFTO0lBQ1QsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxhQUFhO0lBQ2Isa0JBQWtCO0lBQ2xCLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixZQUFZO0lBQ1osbUJBQW1CO0lBQ25CLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLFVBQVU7SUFDVixnQkFBZ0I7SUFDaEIsa0JBQWtCO0FBQ3RCIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgbWluLWhlaWdodDogMTAwdmg7XHJcbiAgICBiYWNrZ3JvdW5kOiAjZjRmNGY0O1xyXG59XHJcblxyXG4ubG9naW4tZm9ybSB7XHJcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xyXG4gICAgYm94LXNoYWRvdzogMHB4IDJweCA2cHggcmdiYSgwLDAsMCwwLjIpO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBnYXA6IDEwcHg7XHJcbiAgICB3aWR0aDogMzAwcHg7XHJcbn1cclxuXHJcbi5sb2dpbi1mb3JtIGgyIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuXHJcbi5sb2dpbi1mb3JtIGlucHV0IHtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG59XHJcblxyXG4ubG9naW4tZm9ybSBidXR0b24ge1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJhY2tncm91bmQ6ICMwMDdiZmY7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5sb2dpbi1mb3JtIGJ1dHRvbjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kOiAjMDA1NmIzO1xyXG59XHJcblxyXG4uZXJyb3Ige1xyXG4gICAgY29sb3I6IHJlZDtcclxuICAgIGZvbnQtc2l6ZTogMC45ZW07XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});\nexport { LoginComponent };","map":{"version":3,"mappings":"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","names":["ReactiveFormsModule","Validators","NgIf","RouterLink","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","error","LoginComponent","constructor","fb","router","validCredentials","email","password","loginForm","group","required","savedUser","localStorage","getItem","user","JSON","parse","isLoggedIn","onSubmit","valid","value","usersJson","users","matchedUser","find","u","setItem","stringify","navigate","ɵɵdirectiveInject","i1","FormBuilder","i2","Router","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_form_ngSubmit_1_listener","ɵɵtemplate","LoginComponent_div_4_Template","ɵɵelement","ɵɵproperty","ɵɵpureFunction0","_c0","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","styles"],"sourceRoot":"","sources":["C:\\Users\\ASUS\\OneDrive\\Desktop\\homes-app\\frontend\\src\\app\\login.ts"],"sourcesContent":["import {Component} from '@angular/core';\r\nimport {FormBuilder, FormGroup, ReactiveFormsModule, Validators} from '@angular/forms';\r\nimport {NgIf} from \"@angular/common\";\r\nimport {RouterLink} from \"@angular/router\";\r\nimport {Router} from \"@angular/router\";\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    standalone: true,\r\n    styleUrls: ['./login.component.css'],\r\n    imports: [ReactiveFormsModule, NgIf, RouterLink],\r\n    template: `\r\n        <div class=\"container\">\r\n            <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\" class=\"login-form\">\r\n                <h2>Login</h2>\r\n                <div *ngIf=\"error\" class=\"error\">{{ error }}</div>\r\n                <input type=\"email\" formControlName=\"email\" placeholder=\"Email\"/>\r\n                <input type=\"password\" formControlName=\"password\" placeholder=\"Password\"/>\r\n                <button type=\"submit\">Accedi</button>\r\n                <p class=\"register-link\">\r\n                    Non hai un account?\r\n                    <a [routerLink]=\"['/register']\">Registrati</a>\r\n                </p>\r\n            </form>\r\n        </div>\r\n    `\r\n})\r\n\r\nexport class LoginComponent {\r\n    loginForm: FormGroup;\r\n    error: string | null = null;\r\n    private validCredentials = [\r\n        {email: 'admin@example.com', password: 'admin123'},\r\n        {email: 'user@example.com', password: 'user123'}\r\n    ];\r\n    private user: any;\r\n    private isLoggedIn: boolean | undefined;\r\n\r\n    constructor(private fb: FormBuilder, private router: Router) {\r\n        this.loginForm = this.fb.group({\r\n            email: ['', [Validators.required, Validators.email]],\r\n            password: ['', [Validators.required]]\r\n        });\r\n\r\n        // controllo se esiste già un utente salvato\r\n        const savedUser = localStorage.getItem('user');\r\n        if (savedUser) {\r\n            this.user = JSON.parse(savedUser);\r\n            this.isLoggedIn = true;\r\n        }\r\n    }\r\n\r\n    onSubmit(): void {\r\n        if (this.loginForm.valid) {\r\n            const {email, password} = this.loginForm.value;\r\n\r\n            const usersJson = localStorage.getItem('registeredUsers');\r\n            const users = usersJson ? JSON.parse(usersJson) : [];\r\n\r\n            // cerca nelle credenziali registrate o hardcoded\r\n            const matchedUser = users.find((u: any) => u.email === email && u.password === password)\r\n                || this.validCredentials.find(u => u.email === email && u.password === password);\r\n\r\n            if (matchedUser) {\r\n                // salva in localStorage\r\n                localStorage.setItem('user', JSON.stringify({email}));\r\n                // naviga alla home page\r\n                this.router.navigate(['/home']);\r\n            } else {\r\n                this.error = 'Credenziali non valide';\r\n            }\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}